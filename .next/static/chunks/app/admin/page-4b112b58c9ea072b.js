(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{550:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var l=s(5155),a=s(2115),r=s(7347);function i(){let[e,t]=(0,a.useState)("portfolio"),[s,i]=(0,a.useState)([]),[o,d]=(0,a.useState)({title:"",slug:"",description:"",images:[],category:"",client:"",location:"",software:[""],dated:new Date().toISOString().split("T")[0]}),[c,n]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1),[g,u]=(0,a.useState)(!1),[b,h]=(0,a.useState)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(null);(0,a.useEffect)(()=>{(async()=>{try{u(!0);let e=await fetch("/api/get-portfolio");if(!e.ok)throw Error("Failed to load data");let t=await e.json();i(t)}catch(e){h(e.message)}finally{u(!1)}})()},[]);let y=e=>{let{name:t,value:s}=e.target;d(e=>({...e,[t]:s}))},j=async e=>{e.preventDefault(),u(!0),h(null);try{let e,t=o.slug||o.title.toLowerCase().replace(/\s+/g,"-"),l={...o,slug:t,images:o.images.map(e=>e.url)};if(c)e=s.map(e=>e.id===c?{...l,id:c}:e);else{let t=Math.max(...s.map(e=>e.id),0)+1;e=[...s,{...l,id:t}]}if(!(await fetch("/api/save-portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save data");i(e),x(!1),w()}catch(e){h(e.message)}finally{u(!1)}},N=e=>{let t=s.find(t=>t.id===e);t&&(d({...t,images:t.images.map(e=>({id:crypto.randomUUID(),url:e}))}),n(e),x(!0))},v=async e=>{if(confirm("Are you sure you want to delete this item?"))try{u(!0);let t=s.filter(t=>t.id!==e);await fetch("/api/save-portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i(t)}catch(e){h(e.message)}finally{u(!1)}},w=()=>{d({title:"",slug:"",description:"",images:[],category:"",client:"",location:"",software:[""],dated:new Date().toISOString().split("T")[0]}),n(null)};return(0,l.jsxs)("div",{className:"flex h-screen bg-gray-900 text-gray-200",children:[(0,l.jsxs)("div",{className:"w-64 bg-gray-800 border-r border-gray-700 p-4",children:[(0,l.jsx)("h1",{className:"text-xl font-bold mb-6",children:"Portfolio Admin"}),(0,l.jsx)("nav",{className:"space-y-2",children:["portfolio","categories","settings"].map(s=>(0,l.jsxs)("button",{onClick:()=>t(s),className:"flex items-center w-full p-3 rounded-lg transition-colors ".concat(e===s?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700"),children:[(0,l.jsx)(r.In,{icon:"portfolio"===s?"mdi:image-multiple":"categories"===s?"mdi:tag-multiple":"mdi:cog",className:"mr-3 text-lg"}),s.charAt(0).toUpperCase()+s.slice(1)]},s))})]}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,l.jsxs)("header",{className:"bg-gray-800 p-4 flex justify-between items-center border-b border-gray-700",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold capitalize",children:"portfolio"===e?"Projects":e}),"portfolio"===e&&(0,l.jsxs)("button",{onClick:()=>x(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center",children:[(0,l.jsx)(r.In,{icon:"mdi:plus",className:"mr-2"}),"Add Project"]})]}),(0,l.jsx)("main",{className:"flex-1 overflow-auto p-6",children:"portfolio"===e&&(0,l.jsx)("div",{className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden",children:0===s.length?(0,l.jsxs)("div",{className:"p-8 text-center text-gray-400",children:[(0,l.jsx)(r.In,{icon:"mdi:image-off",className:"text-4xl mx-auto mb-4"}),(0,l.jsx)("p",{children:"No projects found. Add your first project!"})]}):(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{className:"bg-gray-700 text-gray-300",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"p-4 text-left",children:"Project"}),(0,l.jsx)("th",{className:"p-4 text-left",children:"Category"}),(0,l.jsx)("th",{className:"p-4 text-left",children:"Date"}),(0,l.jsx)("th",{className:"p-4 text-left",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-700",children:s.map(e=>{var t;return(0,l.jsxs)("tr",{className:"hover:bg-gray-750",children:[(0,l.jsx)("td",{className:"p-4",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(null==(t=e.images)?void 0:t[0])&&(0,l.jsx)("img",{src:e.images[0],alt:e.title,className:"w-10 h-10 rounded-md object-cover mr-3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:e.title}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:e.client})]})]})}),(0,l.jsx)("td",{className:"p-4",children:(0,l.jsx)("span",{className:"inline-block bg-gray-700 px-3 py-1 rounded-full text-sm",children:e.category})}),(0,l.jsx)("td",{className:"p-4 text-gray-400",children:e.dated}),(0,l.jsx)("td",{className:"p-4",children:(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)("button",{onClick:()=>N(e.id),className:"text-blue-400 hover:text-blue-300 p-2",children:(0,l.jsx)(r.In,{icon:"mdi:pencil"})}),(0,l.jsx)("button",{onClick:()=>v(e.id),className:"text-red-400 hover:text-red-300 p-2",children:(0,l.jsx)(r.In,{icon:"mdi:trash"})})]})})]},e.id)})})]})})})]}),m&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 overflow-y-auto",children:(0,l.jsxs)("div",{ref:f,className:"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-2xl my-8",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold",children:c?"Edit Project":"Add New Project"}),(0,l.jsx)("button",{onClick:()=>{x(!1),w()},className:"text-gray-400 hover:text-white p-1",children:(0,l.jsx)(r.In,{icon:"mdi:close",className:"text-2xl"})})]}),(0,l.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title*"}),(0,l.jsx)("input",{type:"text",name:"title",value:o.title,onChange:y,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Slug"}),(0,l.jsx)("input",{type:"text",name:"slug",value:o.slug,onChange:y,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"auto-generated"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category*"}),(0,l.jsx)("input",{type:"text",name:"category",value:o.category,onChange:y,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date"}),(0,l.jsx)("input",{type:"date",name:"dated",value:o.dated,onChange:y,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,l.jsx)("textarea",{name:"description",value:o.description,onChange:y,rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Images"}),(0,l.jsx)("input",{type:"file",ref:p,onChange:e=>{let t=Array.from(e.target.files).map(e=>({id:crypto.randomUUID(),url:URL.createObjectURL(e),file:e}));d(e=>({...e,images:[...e.images,...t]}))},className:"hidden",multiple:!0,accept:"image/*"}),(0,l.jsxs)("button",{type:"button",onClick:()=>p.current.click(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg mb-3 flex items-center",children:[(0,l.jsx)(r.In,{icon:"mdi:upload",className:"mr-2"}),"Upload Images"]}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-3",children:o.images.map(e=>(0,l.jsxs)("div",{className:"relative group",children:[(0,l.jsx)("img",{src:e.url,alt:"Preview",className:"w-full h-28 object-cover rounded-lg"}),(0,l.jsx)("button",{type:"button",onClick:()=>removeImage(e.id),className:"absolute top-2 right-2 bg-red-600 hover:bg-red-700 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,l.jsx)(r.In,{icon:"mdi:close",className:"text-sm"})})]},e.id))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Software Used"}),o.software.map((e,t)=>(0,l.jsxs)("div",{className:"flex mb-2",children:[(0,l.jsx)("input",{type:"text",value:e,onChange:e=>handleArrayChange("software",t,e.target.value),className:"flex-1 bg-gray-700 border border-gray-600 rounded-l-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Software name"}),(0,l.jsx)("button",{type:"button",onClick:()=>removeArrayItem("software",t),className:"bg-red-600 hover:bg-red-700 text-white px-4 rounded-r-lg",children:(0,l.jsx)(r.In,{icon:"mdi:minus"})})]},t)),(0,l.jsxs)("button",{type:"button",onClick:()=>addArrayItem("software"),className:"mt-2 bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center",children:[(0,l.jsx)(r.In,{icon:"mdi:plus",className:"mr-2"}),"Add Software"]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-700",children:[(0,l.jsx)("button",{type:"button",onClick:()=>{x(!1),w()},className:"px-6 py-2 rounded-lg text-gray-300 hover:text-white bg-gray-700 hover:bg-gray-600",children:"Cancel"}),(0,l.jsxs)("button",{type:"submit",disabled:g,className:"px-6 py-2 rounded-lg text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 flex items-center",children:[g&&(0,l.jsx)(r.In,{icon:"mdi:loading",className:"animate-spin mr-2"}),c?"Update Project":"Add Project"]})]})]})]})}),g&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),b&&(0,l.jsxs)("div",{className:"fixed bottom-4 right-4 bg-red-600 text-white px-4 py-3 rounded-lg shadow-lg flex items-start max-w-md z-50",children:[(0,l.jsx)(r.In,{icon:"mdi:alert-circle",className:"text-xl mr-2 mt-0.5"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:"Error"}),(0,l.jsx)("p",{className:"text-sm",children:b})]}),(0,l.jsx)("button",{onClick:()=>h(null),className:"ml-4 text-xl",children:"\xd7"})]})]})}},4958:(e,t,s)=>{Promise.resolve().then(s.bind(s,550))}},e=>{var t=t=>e(e.s=t);e.O(0,[347,441,684,358],()=>t(4958)),_N_E=e.O()}]);